{% extends "base.html" %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/home.css') }}" >
{% endblock %}

{% block links %}
<li class="active" id="upload"><a href="#">UPLOAD</a></li>
<li id="analysis"><a href="{{ url_for('analysis') }}">ANALYSIS</a></li>
{% endblock %}

{% block bodycontent %}
<div class="dim_overlay">
  <div class="progress">
      <div class="indeterminate"></div>
  </div>
        <h5 class="dim_loading_overlay">LOADING MODULES</h5>
</div>

<div class="row">
    <div class="canvas_wrap col s7">
        <div id="canvas-wrap">
            <canvas id="video_canvas"></canvas>
            <canvas id="dummy_canvas" width="1024" height="768" style="display: none"></canvas> 
            <div class="overlay_2">
                <video id="video" controls></video>
            </div>
            <div class="overlay">
                {% include "loading.html" %}
                <p id="loadingMsg">LOADING...</p>
            </div>
        </div>
    </div>

    <div class="constraint col s3 offset-s1">
        <div class="card lime darken-2">
            <div class="card-content white-text">
                <span class="card-title">BASELINE</span>
                <div class="input-field">
                    <input id="base_start" type="text" class="timepicker" placeholder="START TIME">
                    <input id="base_end" type="text" class="timepicker" placeholder="END TIME">
                </div>
            </div>
        </div>

        <div class="card blue-grey darken-1">
            <div class="card-content white-text">
                <span class="card-title">CRITICAL TIME</span>
                <div class="input-field">
                    <input id="crit_start" type="text" class="timepicker" placeholder="START TIME">
                    <input id="crit_end" type="text" class="timepicker" placeholder="END TIME">
                </div>
            </div>
        </div>
      </div>

</div>

<div class="row">
    <div id="uploadFormDiv" class="col s6">
        <form id="videoForm" method=post enctype=multipart/form-data>
        <div class="file-field input-field">
            <div class="btn disabled">
                <span>Upload</span>
                <input id="fileItem" type="file" name="file" accept="video/mp4">
            </div>
            <div class="file-path-wrapper">
                <input disabled class="file-path validate" type="text">
            </div>
        </div>
        </form>
    </div>

    <div id="progressBarDiv" class="col s6">
        <div class="progress">
            <div class="determinate" style="width: 0%"></div>
        </div>
        <p id="uploading">UPLOADING: <span id="uploadValue">0%</span></p>
    </div>

    <div class="results col s3 offset-s3">
        <button class="btn-large waves-effect waves-light disabled" onclick="beginAnalysis()">Analyze<i class="material-icons right">sync</i></button>
    </div>
</div>


{% endblock %}


{% block scripts %}
    <script src="https://download.affectiva.com/js/3.2/affdex.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <script src= {{ url_for('static', filename='js/analyze.js')}} ></script>
    <script src= {{ url_for('static', filename='js/affectiva.js')}} ></script>
{% endblock %}